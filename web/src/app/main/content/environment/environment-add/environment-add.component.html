<div class="page-layout carded fullwidth" fusePerfectScrollbar>

  <!-- TOP BACKGROUND -->
  <div class="top-bg mat-accent-bg"></div>
  <!-- / TOP BACKGROUND -->

  <!-- CENTER -->
  <div class="center">

    <!-- CONTENT HEADER -->
    <div class="header white-fg p-24" fxLayout="row" fxLayoutAlign="start center">
      <h2>Add Environment</h2>
    </div>
    <!-- / CONTENT HEADER -->

    <!-- CONTENT CARD -->
    <div class="content-card mat-white-bg">

      <!-- CONTENT TOOLBAR -->
      <div class="toolbar px-24 py-8">
        <span>Environment</span>
      </div>
      <!-- / CONTENT TOOLBAR -->

      <!-- CONTENT -->
      <div class="content p-24" fusePerfectScrollbar>

        <form #form="ngForm" class="form-full">
          <!--<td-message label="Info"-->
                      <!--sublabel="The environment type is used for the deployment workflow. Build only will have two steps, 'start' and 'finish' build. Deploy only will only have two steps, 'start' and 'finish' deploy. Build and deploy will have all four steps."-->
                      <!--color="accent" icon="info"></td-message>-->
            <div fxLayout="column">
              <mat-radio-group #type="ngModel" name="type" [(ngModel)]="environment.type" [required]="true" fxLayout="column"
                               fxLayoutGap="10px" class="mb-36">
                <p>Select your type of environment: <mat-hint>(this can be changed at any time)</mat-hint></p>
                <mat-radio-button value="build">1. Build Only
                  <mat-hint>(this will only have 2 steps, 'start' and 'finish' build.
                    Typical usage would be creating a tag or release asset)</mat-hint>
                </mat-radio-button>
                <mat-radio-button value="deploy">2. Deploy Only
                  <mat-hint>(this will only have 2 steps, 'start' and 'finish' deploy.
                    Typical usage would be when doing a manual deploy)</mat-hint>
                </mat-radio-button>
                <mat-radio-button value="build-deploy">3. Build and Deploy
                  <mat-hint>(this will have option 1 and 2 together. Typical
                    usage would be creating releasable package and deploying it)</mat-hint>
                </mat-radio-button>

                <div *ngIf="type.errors && !form.valid && form.touched">
                  <mat-error *ngIf="type.errors.required">
                    Type is required
                  </mat-error>
                </div>
              </mat-radio-group>
              <mat-form-field>
                <input matInput class="form-control" placeholder="Environment Title (e.g. DashboardHub Testing)"
                       required minlength="3" maxlength="32"
                       name="title" [(ngModel)]="environment.title"
                       #title="ngModel">
                <div *ngIf="title.errors && (title.dirty || title.touched)">
                  <mat-error *ngIf="title.errors.required">
                    Title is required
                  </mat-error>
                  <mat-error *ngIf="title.errors.minlength">
                    Title must be at least 3 characters long.
                  </mat-error>
                  <mat-error *ngIf="title.errors.maxlength">
                    Title cannot be more than 32 characters long.
                  </mat-error>
                </div>
              </mat-form-field>
              <mat-form-field>
                <input matInput class="form-control" placeholder="Logo URL(e.g. https://cdn.dashboardhub.io/icon-only-orange-120x120.png)"
                       minlength="3" maxlength="1024"
                       name="logo" [(ngModel)]="environment.logo"
                       pattern="^https:\/\/.*"
                       #logo="ngModel">
                <div *ngIf="logo.errors && (logo.dirty || title.touched)">
                  <mat-error *ngIf="logo.errors.minlength">
                    Title must be at least 3 characters long.
                  </mat-error>
                  <mat-error *ngIf="logo.errors.maxlength">
                    Title cannot be more than 1024 characters long.
                  </mat-error>
                  <mat-error *ngIf="logo.errors.pattern">
                    Logo url must be on https
                  </mat-error>
                </div>
              </mat-form-field>
              <mat-form-field>
                <input matInput class="form-control"
                       placeholder="Link to your environment (e.g. https://pipeline.dashboardhub.io"
                       minlength="3" maxlength="128"
                       name="link" [(ngModel)]="environment.link"
                       #link="ngModel">
                <div *ngIf="link.errors && (link.dirty || link.touched)">
                  <mat-error *ngIf="link.errors.minlength">
                    Link must be at least 3 characters long.
                  </mat-error>
                  <mat-error *ngIf="link.errors.maxlength">
                    Link cannot be more than 128 characters long.
                  </mat-error>
                </div>
              </mat-form-field>
              <mat-form-field>
                <input matInput class="form-control" placeholder="Description of the environment (e.g. Testing environment for DashboardHub)"
                       minlength="3" maxlength="128"
                       name="description" [(ngModel)]="environment.description"
                       #description="ngModel">
                <div *ngIf="description.errors && (description.dirty || description.touched)">
                  <mat-error *ngIf="description.errors.minlength">
                    Description must be at least 3 characters long.
                  </mat-error>
                  <mat-error *ngIf="description.errors.maxlength">
                    Description cannot be more than 128 characters long.
                  </mat-error>
                </div>
              </mat-form-field>
              <mat-checkbox [disabled]="true" value="false">Is private
                <mat-icon matTooltip="During ALPHA private is not allowed">info</mat-icon>
              </mat-checkbox>
            </div>
            <div class="mt-36">
              <a mat-button routerLink="/environment/list">CANCEL</a>
              <button mat-button color="primary"
                      [disabled]="!form.valid"
                      (click)="add()">SAVE
              </button>
            </div>
        </form>

      </div>
      <!-- / CONTENT -->

    </div>
    <!-- / CONTENT CARD -->

  </div>
  <!-- / CENTER -->

</div>
