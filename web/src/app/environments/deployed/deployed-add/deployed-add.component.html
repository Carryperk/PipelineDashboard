<form #form="ngForm" class="form-full">
  <div fxLayout="row" fxLayoutGap="10px">
    <mat-form-field fxFlex>
      <input matInput class="form-control" placeholder="Release version (e.g. v1.0.123)"
             required minlength="3" maxlength="32"
             name="release" [(ngModel)]="deployed.release"
             #name="ngModel">
      <div *ngIf="deployed.errors && (deployed.dirty || deployed.touched)">
        <mat-error *ngIf="deployed.errors.required">
          Release is required
        </mat-error>
        <mat-error *ngIf="deployed.errors.minlength">
          Release must be at least 3 characters long.
        </mat-error>
        <mat-error *ngIf="deployed.errors.maxlength">
          Release cannot be more than 32 characters long.
        </mat-error>
      </div>
    </mat-form-field>
    <mat-form-field fxFlex="30%">
      <mat-select placeholder="Token" name="token"  [(ngModel)]="deployed.token">
        <mat-option *ngFor="let token of tokens.list" [value]="token">
          {{ token.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field fxFlex="20%">
      <mat-select placeholder="State" name="state"  [(ngModel)]="deployed.state">
        <span *ngFor="let state of states">
          <mat-option [disabled]="!state.types.includes(environment.type)" [value]="state.value">
            {{ state.name }}
          </mat-option>
        </span>
      </mat-select>
    </mat-form-field>
    <button mat-button fxFlex="10%" color="primary"
            [disabled]="!form.valid"
            (click)="add()">SAVE
    </button>
  </div>
</form>
